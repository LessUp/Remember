# 2025-12-19

## 新增
- 新增无构建模块：
  - `src/keys.js`：集中管理 localStorage key 生成（UMD：浏览器/Node/Jest 兼容）。
  - `src/utils.js`：集中管理随机/洗牌等通用工具（UMD：浏览器/Node/Jest 兼容）。
  - `src/storage.js`：集中管理 localStorage 数据读写（UMD：浏览器/Node/Jest 兼容）。
  - `src/i18n.js`：集中管理语言判定与文案字典（UMD：浏览器/Node/Jest 兼容）。
  - `src/effects.js`：集中管理音效与震动等交互效果（UMD：浏览器/Node/Jest 兼容）。
  - `src/pools.js`：集中管理卡面素材池（emoji/数字/字母/形状/颜色）与主题素材选择（UMD：浏览器/Node/Jest 兼容）。
  - `src/timer.js`：集中管理计时/倒计时与时间格式化（UMD：浏览器/Node/Jest 兼容）。
  - `src/confetti.js`：集中管理胜利彩带动画（canvas/resize/动效开关）（UMD：浏览器/Node/Jest 兼容）。
  - `src/ui.js`：集中管理 DOM 元素绑定（getElementById）与 UI 引用汇总（UMD：浏览器/Node/Jest 兼容）。

## 变更
- 更新 `index.html`：在加载 `app.js` 前加载 `src/keys.js`、`src/utils.js`、`src/storage.js`、`src/i18n.js`、`src/effects.js`、`src/pools.js`、`src/timer.js`、`src/confetti.js` 与 `src/ui.js`。
- 更新 `app.js`：接入 `RememberKeys` / `RememberUtils` / `RememberStorage` / `RememberI18n` / `RememberEffects` / `RememberPools` / `RememberTimer` / `RememberConfetti` / `RememberUI`，并将 DOM 元素绑定（getElementById）相关逻辑改为调用模块实现（保留原变量名以兼容现有调用）。
- 更新 `src/storage.js`：补齐每日挑战完成状态、引导隐藏状态、以及“清空本地数据”的 key 批量删除支持。
- 更新 `sw.js`：预缓存列表加入 `src/keys.js`、`src/utils.js`、`src/storage.js`、`src/i18n.js`、`src/effects.js`、`src/pools.js`、`src/timer.js`、`src/confetti.js` 与 `src/ui.js`。
- 更新 `scripts/prepare-deploy.sh`：部署打包时复制 `src/` 目录到 `dist/`。
- 调整 `changelog/2025-12-18.md`：将上述模块化条目迁移至本日记录，按日期归档。

## 验证
- `npm test`：通过。
